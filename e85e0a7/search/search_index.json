{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"mango-go","text":"mango-go <p>The below is the list of packages mango4go currently offers. Each one links to its dedicated deep-dive.</p> <ul> <li>env \u2013 environment variable helpers (<code>EnvOrDefault</code>, <code>MustEnv</code>, etc.)</li> <li>io \u2013 delete/backup/restore files by extension</li> <li>logger \u2013 slog handler with CLI/file/syslog sinks</li> <li>random \u2013 math/crypto random values, password generation, dates</li> <li>slices \u2013 generic slice utilities (contains, chunk, unique, \u2026)</li> <li>testutils \u2013 temp files and assertions for tests</li> <li>time \u2013 start/end-of-day, duration parsing, \u201ctime ago\u201d strings</li> </ul> <p>You want more help? See the full guide. Furthermore, you can find on Discussions forum</p>"},{"location":"guide/","title":"Usage Guide","text":"<p>This guide walks you through configuring a Go project that consumes the <code>github.com/bitstep-ie/mango-go/pkg/...</code> packages. It covers end-to-end setup plus focused examples for each utility package so you can copy, paste, and start shipping features quickly.</p>"},{"location":"guide/#1-project-setup","title":"1. Project Setup","text":"<pre><code>go env -w GO111MODULE=on\ngo get github.com/bitstep-ie/mango-go@latest\n</code></pre> <p>Inside your module, import the packages you need:</p> <pre><code>import (\n    mangoenv \"github.com/bitstep-ie/mango-go/pkg/env\"\n    mangoio \"github.com/bitstep-ie/mango-go/pkg/io\"\n    mangolog \"github.com/bitstep-ie/mango-go/pkg/logger\"\n    mangorand \"github.com/bitstep-ie/mango-go/pkg/random\"\n    mangoslices \"github.com/bitstep-ie/mango-go/pkg/slices\"\n    mangotime \"github.com/bitstep-ie/mango-go/pkg/time\"\n    testutils \"github.com/bitstep-ie/mango-go/pkg/testutils\"\n)\n</code></pre> <p>Tip: keep the <code>mango-</code> prefixes when aliasing packages to avoid name collisions with the stdlib (<code>io</code>, <code>time</code>, <code>slices</code>, etc.).</p>"},{"location":"guide/#2-bootstrapping-the-mango-logger","title":"2. Bootstrapping the Mango Logger","text":"<p>The logger wraps <code>log/slog</code> and supports friendly CLI output, JSON file output (via lumberjack rotation), and syslog simultaneously.</p> <pre><code>package main\n\nimport (\n    \"context\"\n    \"log/slog\"\n    mangolog \"github.com/bitstep-ie/mango-go/pkg/logger\"\n)\n\nfunc main() {\n    cfg := &amp;mangolog.LogConfig{\n        MangoConfig: &amp;mangolog.MangoConfig{\n            Strict: true,\n            CorrelationId: &amp;mangolog.CorrelationIdConfig{\n                Strict:       true,\n                AutoGenerate: true,\n            },\n        },\n        Out: &amp;mangolog.OutConfig{\n            Enabled: true,\n            Cli: &amp;mangolog.CliConfig{\n                Enabled:       true,\n                Friendly:      true,\n                Verbose:       true,\n                FriendlyFormat: ``\"[\\(.level)] \\(.application)::\\(.operation) - \\(.message)\"``,\n            },\n            File: &amp;mangolog.FileOutputConfig{\n                Enabled:    true,\n                Debug:      false,\n                Path:       \"/var/log/my-service.log\",\n                MaxSize:    25,\n                MaxBackups: 5,\n                MaxAge:     14,\n                Compress:   true,\n            },\n            Syslog: &amp;mangolog.SyslogConfig{\n                Facility: mangolog.SyslogFacilityLocal0,\n            },\n        },\n    }\n\n    handler := mangolog.NewMangoLogger(cfg)\n    logger := slog.New(handler)\n\n    ctx := context.WithValue(context.Background(), mangolog.OPERATION, \"checkout\")\n    ctx = context.WithValue(ctx, mangolog.APPLICATION, \"orders-api\")\n    ctx = context.WithValue(ctx, mangolog.TYPE, mangolog.BusinessType)\n\n    logger.InfoContext(ctx, \"order created\",\n        slog.Int(\"orderID\", 42),\n        slog.String(\"status\", \"submitted\"),\n    )\n}\n</code></pre> <p>Key points:</p> <ul> <li>Set <code>MangoConfig.Strict</code> to enforce <code>type</code>, <code>application</code>, and <code>operation</code> context values.</li> <li>Enable <code>CorrelationId.AutoGenerate</code> to avoid panics when downstream middleware forgets to set it.</li> <li>CLI output uses jq expressions (<code>DefaultFriendlyFormat</code>) so you can tailor human logs without touching JSON/file/syslog payloads.</li> </ul>"},{"location":"guide/#3-managing-environment-variables","title":"3. Managing Environment Variables","text":"<pre><code>package config\n\nimport mangoenv \"github.com/bitstep-ie/mango-go/pkg/env\"\n\ntype Config struct {\n    Port        int\n    EnableHTTPS bool\n    DBURL       string\n}\n\nfunc Load() Config {\n    return Config{\n        Port:        mangoenv.EnvAsInt(\"PORT\", 8080),\n        EnableHTTPS: mangoenv.EnvAsBool(\"ENABLE_HTTPS\", false),\n        DBURL:       mangoenv.MustEnv(\"DATABASE_URL\"),\n    }\n}\n</code></pre> <ul> <li>Use <code>EnvOrDefault</code>/<code>EnvAsInt</code> for soft defaults.</li> <li>Prefer <code>MustEnv*</code> variants for critical values so misconfiguration fails fast during startup.</li> </ul>"},{"location":"guide/#4-file-maintenance-helpers-pkgio","title":"4. File Maintenance Helpers (<code>pkg/io</code>)","text":"<pre><code>package backup\n\nimport mangoio \"github.com/bitstep-ie/mango-go/pkg/io\"\n\nfunc RotateConfigs(dir string) error {\n    if err := mangoio.BackupFilesWithExt(dir, []string{\".yaml\", \".json\"}); err != nil {\n        return err\n    }\n\n    // run your migration/update logic here\n\n    return mangoio.RestoreAllBakFiles(dir)\n}\n</code></pre> <p><code>DeleteFileWithExt</code> works the same way and is handy for cleaning generated artifacts (<code>.tmp</code>, <code>.bak</code>, etc.). The helpers walk the entire tree, so point them at the narrowest directory possible.</p>"},{"location":"guide/#5-random-data-recipes-pkgrandom","title":"5. Random Data Recipes (<code>pkg/random</code>)","text":"<pre><code>package demo\n\nimport (\n    \"time\"\n    mangorand \"github.com/bitstep-ie/mango-go/pkg/random\"\n)\n\nfunc init() {\n    rand.Seed(time.Now().UnixNano()) // only needed once per process\n}\n\nfunc buildFixtures() {\n    run := mangorand.Number[int](1, 5)\n    coinFlip := mangorand.Bool()\n    promoCode := mangorand.String(10)\n    securePassword := mangorand.Password(24, mangorand.PasswordOptions{\n        Letters: true,\n        Digits:  true,\n        Symbols: true,\n        Exclude: \"O0l1\",\n    })\n    randomRunAt := mangorand.Date(time.Now().Add(-30*24*time.Hour), time.Now())\n\n    _ = []any{run, coinFlip, promoCode, securePassword, randomRunAt}\n}\n</code></pre> <p>The package mixes math/rand conveniences with crypto-safe building blocks (<code>Byte</code>, <code>Password</code>). Always seed <code>math/rand</code> in your main package if you rely on <code>Number</code>, <code>Bool</code>, <code>Choice</code>, etc.</p>"},{"location":"guide/#6-slice-utilities","title":"6. Slice Utilities","text":"<pre><code>events := []string{\"created\", \"updated\", \"deleted\", \"deleted\"}\nunique := mangoslices.Unique(events) // [\"created\",\"updated\",\"deleted\"]\n\nif mangoslices.Contains(events, \"created\") {\n    idx := mangoslices.IndexOf(events, \"deleted\") // first match\n    copy := append([]string(nil), events...)\n    mangoslices.Reverse(copy)\n}\n\npairs := mangoslices.EqualsIgnoreOrder(\n    []int{1, 2, 2, 3},\n    []int{2, 1, 3, 2},\n) // true\n\nbatched := mangoslices.Chunk(events, 2)\n</code></pre> <p>Generics keep these helpers type-safe and allocation-friendly. <code>Chunk</code> panics when <code>size &lt;= 0</code>; validate user input before calling it.</p>"},{"location":"guide/#7-working-with-time","title":"7. Working with Time","text":"<pre><code>now := time.Now()\nstart := mangotime.StartOfDay(now)\nend := mangotime.EndOfDay(now)\n\nif mangotime.IsToday(now) {\n    fmt.Println(\"still today\")\n}\n\ndeadline, err := mangotime.ParseDuration(\"1w12h30m\")\nif err != nil { /* handle */ }\n\nfmt.Println(mangotime.TimeAgo(time.Now().Add(-90 * time.Minute))) // \"1 hour ago\"\n</code></pre> <p><code>ParseDuration</code> extends <code>time.ParseDuration</code> with <code>d</code> and <code>w</code> suffixes (supports floats like <code>1.5d</code>). <code>TimeAgo</code> returns human-friendly English strings for UI messaging.</p>"},{"location":"guide/#8-test-utilities","title":"8. Test Utilities","text":"<pre><code>func TestProcessor(t *testing.T) {\n    tmp := testutils.MustMakeTempFile(t, t.TempDir(), \"payload-*.json\")\n\n    payload := uuid.NewString()\n    require.NoError(t, os.WriteFile(tmp.Name(), []byte(payload), 0o600))\n\n    runProcessor(tmp.Name())\n\n    testutils.AssertValidUUID(t, got.ID, \"logId\")\n    testutils.ContainsAllRunes(t, got.Token, \"!@#\", \"token should include special chars\")\n}\n</code></pre> <ul> <li><code>MustMakeTempFile</code> simplifies fixture creation; it will close the handle automatically.</li> <li><code>AssertValidUUID</code> and <code>ContainsAllRunes</code> piggyback on <code>stretchr/testify</code> for idiomatic assertions.</li> </ul>"},{"location":"guide/#9-putting-it-all-together","title":"9. Putting It All Together","text":"<p>Here\u2019s a minimal HTTP handler showcasing multiple packages:</p> <pre><code>type Server struct {\n    logger *slog.Logger\n    cfg    Config\n}\n\nfunc NewServer(cfg Config) *Server {\n    handler := mangolog.NewMangoLogger(buildLogConfig(cfg))\n    return &amp;Server{\n        logger: slog.New(handler),\n        cfg:    cfg,\n    }\n}\n\nfunc (s *Server) ServeHTTP(w http.ResponseWriter, r *http.Request) {\n    ctx := context.WithValue(r.Context(), mangolog.APPLICATION, \"billing-api\")\n    ctx = context.WithValue(ctx, mangolog.OPERATION, \"invoice-create\")\n    ctx = context.WithValue(ctx, mangolog.TYPE, mangolog.BusinessType)\n\n    reqID := r.Header.Get(\"X-Request-ID\")\n    if reqID == \"\" {\n        reqID = mangorand.String(12)\n    }\n    ctx = context.WithValue(ctx, mangolog.CORRELATION_ID, reqID)\n\n    s.logger.InfoContext(ctx, \"processing request\",\n        slog.String(\"method\", r.Method),\n        slog.String(\"path\", r.URL.Path),\n        slog.String(\"receivedAt\", mangotime.StartOfDay(time.Now()).Format(mangolog.RFC3339NanoMC)),\n    )\n\n    w.WriteHeader(http.StatusAccepted)\n}\n</code></pre> <p>This pattern scales: standardize context values at the edge, use Mango Logger for structured telemetry, derive configuration via <code>pkg/env</code>, and lean on the helper packages for the rest.</p>"},{"location":"guide/#10-next-steps","title":"10. Next Steps","text":"<ol> <li>Browse <code>docs/mango-go/packages/*.md</code> for deeper API details.</li> <li>Wire these helpers into your project\u2019s scaffolding (CLI, HTTP server, worker, etc.).</li> <li>Contribute improvements or new helpers by following <code>contributing.md</code>.</li> </ol>"},{"location":"packages/env/","title":"<code>pkg/env</code>","text":"<p>Helpers for reading configuration from environment variables with sensible defaults and explicit \u201cmust\u201d variants that panic when a value is missing or malformed.</p>"},{"location":"packages/env/#quick-start","title":"Quick Start","text":"<pre><code>import mangoenv \"github.com/bitstep-ie/mango-go/pkg/env\"\n\ntype Config struct {\n    Port        int\n    EnableHTTPS bool\n    Secret      string\n}\n\nfunc Load() Config {\n    return Config{\n        Port:        mangoenv.EnvAsInt(\"PORT\", 8080),\n        EnableHTTPS: mangoenv.EnvAsBool(\"ENABLE_HTTPS\", false),\n        Secret:      mangoenv.MustEnv(\"API_SECRET\"),\n    }\n}\n</code></pre>"},{"location":"packages/env/#api-cheatsheet","title":"API Cheatsheet","text":"Function Purpose <code>EnvOrDefault(key, fallback string)</code> string with fallback <code>MustEnv(key)</code> string or panic if empty <code>EnvAsInt(key, fallback int)</code> / <code>MustEnvAsInt(key)</code> parse integer values <code>EnvAsBool(key, fallback bool)</code> / <code>MustEnvAsBool(key)</code> parse boolean values <p>Each helper treats \u201cmissing\u201d as <code>\"\"</code> and panics with descriptive messages for invalid conversions.</p>"},{"location":"packages/env/#examples","title":"Examples","text":""},{"location":"packages/env/#strings","title":"Strings","text":"<pre><code>name := mangoenv.EnvOrDefault(\"SERVICE_NAME\", \"checkout\")\ntoken := mangoenv.MustEnv(\"BEARER_TOKEN\") // panic if unset\n</code></pre>"},{"location":"packages/env/#integers","title":"Integers","text":"<pre><code>maxConnections := mangoenv.EnvAsInt(\"MAX_CONN\", 10)\ntimeout := mangoenv.MustEnvAsInt(\"REQUEST_TIMEOUT_SECONDS\")\n</code></pre>"},{"location":"packages/env/#booleans","title":"Booleans","text":"<pre><code>debug := mangoenv.EnvAsBool(\"DEBUG\", false)\ntlsOnly := mangoenv.MustEnvAsBool(\"TLS_ONLY\")\n</code></pre>"},{"location":"packages/env/#tips","title":"Tips","text":"<ul> <li>Use <code>EnvAs*</code> when you can tolerate defaults (local dev) and <code>MustEnv*</code> for production-critical knobs.</li> <li>Panics happen on invalid formats (e.g., <code>EnvAsInt(\"PORT\")</code> with <code>PORT=abc</code>). Keep these calls near bootstrapping code so the service fails fast.</li> <li>Wrap lookups in a struct constructor (see Quick Start) to centralize configuration logic.</li> </ul>"},{"location":"packages/io/","title":"<code>pkg/io</code>","text":"<p>Small filesystem helpers for bulk operations (delete, backup, restore) based on file extensions. The package walks a directory tree, so you can prepare rollbacks or cleanups with a single call.</p>"},{"location":"packages/io/#quick-start","title":"Quick Start","text":"<pre><code>import mangoio \"github.com/bitstep-ie/mango-go/pkg/io\"\n\nfunc rotateConfigs(dir string) error {\nif err := mangoio.BackupFilesWithExt(dir, []string{\".yaml\", \".json\"}); err != nil {\nreturn err\n}\n\n// \u2026 mutate configs here \u2026\n\nreturn mangoio.RestoreAllBakFiles(dir)\n}\n</code></pre>"},{"location":"packages/io/#api-overview","title":"API Overview","text":"Function Description <code>SafeClose(c)</code> safely close closer c, no output <code>SafeClosePrint(c)</code> safely close closer c, and output the error if any <code>DeleteFileWithExt(dir, []string{\".log\"})</code> remove every matching file (no prompt) <code>BackupFilesWithExt(dir, []string{\".conf\"})</code> copy <code>foo.conf \u2192 foo.conf.bak</code> <code>RestoreAllBakFiles(dir)</code> copy <code>*.bak</code> back to originals and remove the <code>.bak</code> files <p>Extensions must include the leading dot (<code>.log</code>). Matches are based on the final path extension (<code>file.txt.bak</code> is treated as <code>.bak</code>).</p>"},{"location":"packages/io/#usage-patterns","title":"Usage Patterns","text":""},{"location":"packages/io/#cleaning-generated-files","title":"Cleaning Generated Files","text":"<pre><code>func cleanArtifacts(dir string) error {\nreturn mangoio.DeleteFileWithExt(dir, []string{\".tmp\", \".bak\"})\n}\n</code></pre>"},{"location":"packages/io/#safe-inline-backups","title":"Safe Inline Backups","text":"<pre><code>func upgrade(dir string) error {\n// 1. duplicate target files\nif err := mangoio.BackupFilesWithExt(dir, []string{\".json\"}); err != nil {\nreturn err\n}\n\n// 2. apply your upgrade logic\nif err := runMigration(dir); err != nil {\n// roll back\n_ = mangoio.RestoreAllBakFiles(dir)\nreturn err\n}\n\n// 3. cleanup backups if desired\nreturn mangoio.DeleteFileWithExt(dir, []string{\".bak\"})\n}\n</code></pre>"},{"location":"packages/io/#testing-hooks","title":"Testing Hooks","text":"<p>Internally the package swaps <code>os.Remove</code>, <code>filepath.Walk</code>, and copy operations with overridable function variables to simplify unit tests. In production you never touch these, but the pattern means you can inject fakes when writing tests for your code that depends on <code>pkg/io</code>.</p>"},{"location":"packages/io/#tips","title":"Tips","text":"<ul> <li>Run these helpers on the narrowest directory possible to avoid traversing large trees.</li> <li>All operations are best-effort: once a delete or copy fails, the function returns the first error with the file path.</li> <li><code>RestoreAllBakFiles</code> overwrites existing originals. Use <code>BackupFilesWithExt</code> immediately before mutations if you need   a guaranteed rollback path.</li> </ul>"},{"location":"packages/logger/","title":"<code>pkg/logger</code>","text":"<p>A structured logging handler built on top of <code>log/slog</code>. It fans each record out to CLI, rotating files (via <code>lumberjack</code>), and syslog simultaneously, while enforcing context contracts such as <code>type</code>, <code>application</code>, and <code>operation</code>.</p>"},{"location":"packages/logger/#quick-start","title":"Quick Start","text":"<pre><code>import (\n    \"context\"\n    \"log/slog\"\n    mangolog \"github.com/bitstep-ie/mango-go/pkg/logger\"\n)\n\nfunc newLogger() *slog.Logger {\n    cfg := &amp;mangolog.LogConfig{\n        MangoConfig: &amp;mangolog.MangoConfig{\n            Strict: true,\n            CorrelationId: &amp;mangolog.CorrelationIdConfig{\n                Strict:       true,\n                AutoGenerate: true,\n            },\n        },\n        Out: &amp;mangolog.OutConfig{\n            Enabled: true,\n            Cli: &amp;mangolog.CliConfig{\n                Enabled:  true,\n                Friendly: true,\n                Verbose:  false,\n            },\n            File: &amp;mangolog.FileOutputConfig{\n                Enabled:  true,\n                Debug:    false,\n                Path:     \"/var/log/service.log\",\n                MaxSize:  50,\n                Compress: true,\n            },\n        },\n    }\n    return slog.New(mangolog.NewMangoLogger(cfg))\n}\n\nfunc logExample(logger *slog.Logger) {\n    ctx := context.Background()\n    ctx = context.WithValue(ctx, mangolog.APPLICATION, \"checkout-api\")\n    ctx = context.WithValue(ctx, mangolog.OPERATION, \"cart-create\")\n    ctx = context.WithValue(ctx, mangolog.TYPE, mangolog.BusinessType)\n\n    logger.InfoContext(ctx, \"cart created\",\n        slog.Int(\"items\", 3),\n        slog.String(\"country\", \"IE\"),\n    )\n}\n</code></pre>"},{"location":"packages/logger/#configuration","title":"Configuration","text":"<p><code>LogConfig</code> is split into:</p> <ul> <li><code>MangoConfig</code>: strict mode + correlation-id behaviour.</li> <li><code>Out</code>: toggles for <code>File</code>, <code>Cli</code>, and <code>Syslog</code>.</li> </ul> <pre><code>mango:\n  strict: true\n  correlation-id:\n    strict: true\n    auto-generate: true\nout:\n  enabled: true\n  cli:\n    enabled: true\n    friendly: true\n    friendly-format: '\"[\\(.level)] \\(.operation) - \\(.message)\"'\n    verbose: true\n    verbose-format: \".\"\n  file:\n    enabled: true\n    debug: false\n    path: /var/log/mango.log\n    max-size: 100\n    max-backups: 5\n    max-age: 7\n    compress: true\n  syslog:\n    facility: local0\n</code></pre> <p>Friendly/verbose formats consume jq strings (<code>gojq</code>) and default to built-in templates when left empty.</p>"},{"location":"packages/logger/#context-requirements","title":"Context Requirements","text":"<p>Strict mode enforces presence (and validity) of:</p> <ul> <li><code>mangolog.TYPE</code> \u2013 must be one of <code>Business</code>, <code>Security</code>, <code>Performance</code>.</li> <li><code>mangolog.APPLICATION</code></li> <li><code>mangolog.OPERATION</code></li> <li><code>mangolog.CORRELATION_ID</code> (when <code>correlation-id.strict</code> is true; auto-generated if <code>auto-generate</code> is true).</li> </ul> <p>On missing or invalid fields, <code>Handle</code> logs an error and returns it to the slog caller.</p>"},{"location":"packages/logger/#outputs","title":"Outputs","text":""},{"location":"packages/logger/#cli","title":"CLI","text":"<ul> <li>When <code>friendly</code> is true, Mango Logger runs the log through the jq template (e.g., <code>\"[INFO] create - success\"</code>).</li> <li>Otherwise, it prints raw JSON to stdout/stderr.</li> <li><code>verbose</code> gates debug logs on stdout and includes correlation IDs for INFO-level messages.</li> </ul>"},{"location":"packages/logger/#file","title":"File","text":"<ul> <li>Writes newline-delimited JSON (<code>StructuredLog</code>) using lumberjack rotation.</li> <li><code>debug</code> controls whether <code>LevelDebug</code> entries reach the file.</li> </ul>"},{"location":"packages/logger/#syslog","title":"Syslog","text":"<ul> <li>Enabled by setting <code>out.syslog.facility</code> or the corresponding constant (e.g., <code>mangolog.SyslogFacilityLocal0</code>).</li> <li>Severity is derived from the slog level.</li> <li>Not available on Windows (build tags guard the implementation).</li> </ul>"},{"location":"packages/logger/#structured-output","title":"Structured Output","text":"<pre><code>{\n  \"ts\": \"2025-01-15T09:53:34.717-0500\",\n  \"type\": \"Business\",\n  \"application\": \"checkout-api\",\n  \"operation\": \"cart-create\",\n  \"correlationid\": \"a52b0129-9d49-4f29-acbb-3575aa4442f4\",\n  \"logId\": \"67e36893-0a7e-476c-b799-4a2772e9bd17\",\n  \"level\": \"INFO\",\n  \"message\": \"cart created\",\n  \"attributes\": {\n    \"items\": 3,\n    \"country\": \"IE\"\n  }\n}\n</code></pre>"},{"location":"packages/logger/#tips","title":"Tips","text":"<ol> <li>Use middleware to stamp context keys (<code>TYPE</code>, <code>APPLICATION</code>, <code>OPERATION</code>, <code>CORRELATION_ID</code>) once per request.</li> <li>Toggle <code>Cli.Verbose</code> via CLI flags (<code>--verbose</code>) to expose debug logs during troubleshooting.</li> <li>When <code>Strict</code> is enabled, avoid mutating the global <code>REQUIRED_FIELDS</code>; create fresh contexts per request to prevent leaking values across goroutines.</li> </ol>"},{"location":"packages/random/","title":"<code>pkg/random</code>","text":"<p>Convenience helpers for building fixtures, tokens, and fuzz data. Functions span deterministic math/rand utilities and crypto-safe password generation.</p>"},{"location":"packages/random/#quick-start","title":"Quick Start","text":"<pre><code>import (\n    \"math/rand\"\n    \"time\"\n    mangorand \"github.com/bitstep-ie/mango-go/pkg/random\"\n)\n\nfunc init() {\n    rand.Seed(time.Now().UnixNano()) // seed math/rand once per process\n}\n\nfunc example() {\n    promo := mangorand.String(8)\n    orderID := mangorand.Number[int](1000, 9999)\n    mustRun := mangorand.Bool()\n    secret := mangorand.Password(24, mangorand.PasswordOptions{\n        Letters: true,\n        Digits:  true,\n        Symbols: true,\n        Exclude: \"O0l1\",\n    })\n    _ = []any{promo, orderID, mustRun, secret}\n}\n</code></pre>"},{"location":"packages/random/#api-highlights","title":"API Highlights","text":""},{"location":"packages/random/#numbers-booleans","title":"Numbers &amp; Booleans","text":"<ul> <li><code>Number[T Num](min, max T)</code> \u2013 inclusive range for ints/uints, <code>[min,max)</code> for floats. Automatically swaps min/max.</li> <li><code>Sign()</code> \u2013 returns <code>+1</code> or <code>-1</code>.</li> <li><code>Bool()</code> \u2013 coin flip.</li> <li><code>Choice(slice []T)</code> \u2013 pick a random element, panics on empty slice.</li> </ul>"},{"location":"packages/random/#bytes-strings","title":"Bytes &amp; Strings","text":"<ul> <li><code>Byte()</code> \u2013 cryptographically secure random byte.</li> <li><code>String(n)</code> \u2013 alphanumeric (upper+lowercase, digits).</li> <li><code>Alpha(n)</code> / <code>Numeric(n)</code> \u2013 letters-only or digits-only.</li> <li><code>FromCharset(n, charset)</code> \u2013 supply your own rune set.</li> </ul>"},{"location":"packages/random/#passwords","title":"Passwords","text":"<pre><code>pw := mangorand.Password(16, mangorand.PasswordOptions{\n    Letters: true,\n    Digits:  true,\n    Symbols: false,\n})\n</code></pre> <p>Options allow mixing letters, digits, symbols, plus excluding ambiguous characters. Generation uses <code>crypto/rand</code> so the output is safe for access tokens and human passwords. Panics if the resulting charset would be empty.</p>"},{"location":"packages/random/#time-helpers","title":"Time Helpers","text":"<ul> <li><code>Date(min, max time.Time)</code> \u2013 inclusive random timestamp.</li> <li><code>Duration(min, max time.Duration)</code> \u2013 inclusive random duration.</li> </ul> <p>Both helpers swap arguments when <code>min &gt; max</code>, making it easy to mock \u201crecent\u201d or \u201csoon\u201d values without extra branching.</p>"},{"location":"packages/random/#tips","title":"Tips","text":"<ul> <li>Only the functions under \u201cNumbers &amp; Booleans\u201d rely on <code>math/rand</code>; seed it once during startup for non-deterministic sequences.</li> <li><code>Choice</code> and <code>Password</code> panic when misused; wrap them in helper functions if you need error returns instead.</li> <li>Combine <code>PasswordOptions{Symbols: true}</code> with <code>testutils.ContainsAllRunes</code> to assert generated strings hit every required character class in tests.</li> </ul>"},{"location":"packages/slices/","title":"<code>pkg/slices</code>","text":"<p>Generic helpers for common slice patterns\u2014membership, counting, chunking, reversing, and deduplication\u2014without re-writing loops at every callsite.</p>"},{"location":"packages/slices/#quick-start","title":"Quick Start","text":"<pre><code>import mangoslices \"github.com/bitstep-ie/mango-go/pkg/slices\"\n\nnames := []string{\"amy\", \"ben\", \"amy\"}\nif mangoslices.Contains(names, \"ben\") {\n    idx := mangoslices.IndexOf(names, \"amy\") // 0\n    freq := mangoslices.ContainsCount(names, \"amy\") // 2\n    unique := mangoslices.Unique(names) // [\"amy\",\"ben\"]\n    chunks := mangoslices.Chunk(names, 2) // [[\"amy\",\"ben\"],[\"amy\"]]\n    _ = []any{idx, freq, unique, chunks}\n}\n</code></pre>"},{"location":"packages/slices/#api-reference","title":"API Reference","text":"Function Description <code>EqualsIgnoreOrder(a, b)</code> compare two slices while ignoring element order but respecting multiplicity <code>Contains(slice, value)</code> membership test <code>ContainsCount(slice, value)</code> count occurrences <code>IndexOf(slice, value)</code> index of first match (<code>-1</code> if missing) <code>IndexOfAll(slice, value)</code> every index that matches <code>Unique(slice)</code> deduplicated copy preserving first-seen order <code>Reverse(slice)</code> in-place reversal <code>Chunk(slice, size)</code> split into evenly sized batches (last chunk may be smaller) <p>All helpers are generic (Go 1.18+) and therefore type-safe across ints, structs, strings, etc. Functions that mutate (<code>Reverse</code>) do so in-place; the rest allocate new slices as needed.</p>"},{"location":"packages/slices/#examples","title":"Examples","text":""},{"location":"packages/slices/#equalsignoreorder","title":"EqualsIgnoreOrder","text":"<pre><code>a := []int{1, 2, 2, 3}\nb := []int{3, 2, 1, 2}\nsame := mangoslices.EqualsIgnoreOrder(a, b) // true\n</code></pre>"},{"location":"packages/slices/#indexofall","title":"IndexOfAll","text":"<pre><code>positions := mangoslices.IndexOfAll([]string{\"ca\", \"ba\", \"ca\"}, \"ca\")\n// []int{0, 2}\n</code></pre>"},{"location":"packages/slices/#chunk-batching","title":"Chunk (Batching)","text":"<pre><code>jobs := []int{1, 2, 3, 4, 5}\nbatches := mangoslices.Chunk(jobs, 2)\n// [][]int{{1,2}, {3,4}, {5}}\n</code></pre> <p><code>Chunk</code> panics when <code>size &lt;= 0</code>; validate user input before calling it.</p>"},{"location":"packages/slices/#tips","title":"Tips","text":"<ul> <li>These helpers are a drop-in replacement for small anonymous loops, making tests and production code easier to read.</li> <li>Combine <code>Unique</code> + <code>Chunk</code> to dedupe and batch IDs before fan-out.</li> <li><code>EqualsIgnoreOrder</code> is helpful in tests for comparing slices where ordering is non-deterministic.</li> </ul>"},{"location":"packages/testutils/","title":"<code>pkg/testutils</code>","text":"<p>Testing helpers that reduce boilerplate when working with temporary files and structured assertions.</p> <pre><code>import (\n    \"os\"\n    \"testing\"\n    testutils \"github.com/bitstep-ie/mango-go/pkg/testutils\"\n)\n\nfunc TestProcessor(t *testing.T) {\n    tmp := testutils.MustMakeTempFile(t, t.TempDir(), \"payload-*.json\")\n    defer os.Remove(tmp.Name())\n\n    // write fixture data, run code under test\u2026\n\n    testutils.AssertValidUUID(t, got.LogID, \"logId\")\n    testutils.ContainsAllRunes(t, got.Token, \"!@#\", \"token must include punctuation\")\n}\n</code></pre>"},{"location":"packages/testutils/#helpers","title":"Helpers","text":""},{"location":"packages/testutils/#mustmaketempfilet-dir-pattern-osfile","title":"<code>MustMakeTempFile(t, dir, pattern) *os.File</code>","text":"<ul> <li>Creates a file using <code>os.CreateTemp</code>.</li> <li>Fails the test via <code>assert.Fail</code> if creation fails.</li> <li>Closes the returned file automatically; reopen with <code>os.Open</code> if you need to append later.</li> </ul>"},{"location":"packages/testutils/#assertvaliduuidt-value-fieldname","title":"<code>AssertValidUUID(t, value, fieldName)</code>","text":"<ul> <li>Delegates to <code>uuid.Parse</code>.</li> <li>Fails the test with a friendly message that includes <code>fieldName</code>.</li> </ul>"},{"location":"packages/testutils/#containsallrunest-str-chars-msgandargs","title":"<code>ContainsAllRunes(t, str, chars, msgAndArgs...)</code>","text":"<ul> <li>Ensures every rune in <code>chars</code> exists at least once in <code>str</code>.</li> <li>Useful for asserting generated passwords or tokens meet composition rules.</li> </ul>"},{"location":"packages/testutils/#tips","title":"Tips","text":"<ul> <li>The helpers pull in <code>stretchr/testify/assert</code>, so you can mix these with other testify assertions without additional setup.</li> <li>When using <code>MustMakeTempFile</code>, prefer <code>t.TempDir()</code> so Go cleans up the directory after the test run.</li> </ul>"},{"location":"packages/time/","title":"<code>pkg/time</code>","text":"<p>Utility functions for common calendaring tasks (start/end-of-day boundaries, relative checks), human-friendly \u201ctime ago\u201d formatting, and extended duration parsing.</p>"},{"location":"packages/time/#quick-start","title":"Quick Start","text":"<pre><code>import mangotime \"github.com/bitstep-ie/mango-go/pkg/time\"\n\nnow := time.Now()\nstart := mangotime.StartOfDay(now)\nend := mangotime.EndOfDay(now)\n\nif mangotime.IsToday(now) {\n    fmt.Println(\"still today\")\n}\n\ndeadline, _ := mangotime.ParseDuration(\"1w2d12h\")\nfmt.Println(mangotime.TimeAgo(time.Now().Add(-90 * time.Minute))) // \"1 hour ago\"\n</code></pre>"},{"location":"packages/time/#calendar-helpers","title":"Calendar Helpers","text":"Function Description <code>StartOfDay(t)</code> midnight in the same location <code>EndOfDay(t)</code> last nanosecond of the day <code>IsToday(t)</code> / <code>IsTomorrow(t)</code> check relative to local time <code>IsTodayLoc(t, loc)</code> / <code>IsTomorrowLoc(t, loc)</code> same checks using a custom <code>*time.Location</code> <p>Both \u201cIs\u201d helpers treat the exact boundary values as matches (<code>StartOfDay(t)</code> is \u201ctoday\u201d; <code>EndOfDay(t)</code> is still \u201ctoday\u201d).</p>"},{"location":"packages/time/#duration-parsing","title":"Duration Parsing","text":"<p><code>ParseDuration</code> extends Go\u2019s built-in parser with <code>d</code> (days) and <code>w</code> (weeks), including fractional values.</p> <pre><code>dur, err := mangotime.ParseDuration(\"2w1.5d30m\")\n// -&gt; 2 weeks + 1.5 days + 30 minutes\n</code></pre> <p>If the string is empty, the function returns an error. For other invalid formats, it falls back to <code>time.ParseDuration</code>\u2019s error.</p>"},{"location":"packages/time/#relative-formatting","title":"Relative Formatting","text":"<p><code>TimeAgo(t)</code> (and the internal <code>timeAgoWithNow(t, now)</code>) return concise English strings:</p> <ul> <li><code>&lt;1m</code> \u2192 <code>just now</code></li> <li><code>=1m</code> \u2192 <code>1 minute ago</code></li> <li><code>&lt;1h</code> \u2192 <code>X minutes ago</code></li> <li><code>&lt;24h</code> \u2192 <code>X hours ago</code></li> <li><code>&lt;48h</code> \u2192 <code>yesterday</code></li> <li>otherwise \u2192 <code>X days ago</code></li> </ul> <p>Ideal for CLI or UI messages without pulling in a full i18n library.</p>"},{"location":"packages/time/#tips","title":"Tips","text":"<ul> <li>Use <code>IsTodayLoc</code> / <code>IsTomorrowLoc</code> when you store timestamps in UTC but need to reason about a customer\u2019s timezone.</li> <li>Combine <code>StartOfDay</code> + <code>Add(24*time.Hour)</code> to build custom windows (e.g., \u201cthis business day\u201d).</li> <li>When parsing human input (cron-like configs, CLI flags), accept strings such as <code>90m</code>, <code>2d</code>, <code>1w12h30m</code> to keep UX flexible.</li> </ul>"}]}